<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PBC Monitor Dashboard</title>
    <link rel="stylesheet" href="style.css" />
    <!--CONFIG_PLACEHOLDER-->
  </head>
  <body>
    <header class="app-header">
      <h1>PBC Monitor Dashboard</h1>
      <p>
        Last updated <span data-generated-at>—</span>. Auto refresh every
        <span data-auto-refresh>—</span> second(s).
      </p>
    </header>
    <main>
      <section class="summary" id="summary"></section>
      <section class="task-filters" id="task-filters">
        <div class="task-filters__header">
          <h2>任务筛选</h2>
          <p>按状态或关键字快速定位需要关注的任务。</p>
        </div>
        <form id="task-filter-form" class="filters-form" autocomplete="off">
          <label class="filters-form__field filters-form__field--grow" for="task-filter-query">
            关键字
            <input
              type="search"
              id="task-filter-query"
              name="query"
              placeholder="按任务名称、标识或起始链接筛选"
            />
          </label>
          <label class="filters-form__field" for="task-filter-status">
            状态
            <select id="task-filter-status" name="status">
              <option value="all">全部状态</option>
              <option value="ok">正常</option>
              <option value="attention">关注</option>
              <option value="waiting">等待</option>
              <option value="stale">过期</option>
            </select>
          </label>
          <button type="reset" class="filters-form__reset">重置</button>
        </form>
        <div class="filters-form__status" id="task-filter-status-text"></div>
      </section>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Task</th>
              <th>Entries</th>
              <th>Documents</th>
              <th>Downloaded</th>
              <th>Pending</th>
              <th>Tracked files</th>
              <th>Status</th>
              <th>Last update</th>
              <th>Next window</th>
              <th>Listing cache</th>
              <th>Downloads</th>
              <th>File types</th>
            </tr>
          </thead>
          <tbody id="tasks-body">
            <tr>
              <td colspan="12" class="empty">Loading…</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="message hidden" id="status-message"></div>
      <section class="search-panel" id="search-panel">
        <div class="search-panel__header">
          <h2>政策检索</h2>
          <p>查询已抓取任务中的政策条目，快速定位关键文档。</p>
        </div>
        <form id="search-form" class="search-form" autocomplete="off">
          <label class="field field--grow" for="search-query">
            关键词
            <input
              type="text"
              id="search-query"
              name="query"
              placeholder="请输入关键词，例如 金融监管"
              required
            />
          </label>
          <label class="field" for="search-topk">
            返回数量
            <input
              type="number"
              id="search-topk"
              name="topk"
              min="1"
              max="50"
              value="5"
            />
          </label>
          <label class="field field--checkbox" for="search-include-documents">
            <input
              type="checkbox"
              id="search-include-documents"
              name="include_documents"
              checked
            />
            <span>包含文档详情</span>
          </label>
          <button type="submit" id="search-submit">开始检索</button>
        </form>
        <div class="message hidden" id="search-status"></div>
        <ol id="search-results" class="search-results">
          <li class="empty">输入关键词后开始检索。</li>
        </ol>
      </section>
    </main>
    <footer>
      PBC Monitor dashboard &middot; Generated at
      <span data-generated-at>—</span>
    </footer>
    <script src="main.js" defer></script>
  </body>
</html>
